kind: StorageCluster
apiVersion: core.libopenstorage.org/v1
metadata:
  name: px-cluster
  namespace: portworx
  annotations:
    portworx.io/is-openshift: "true"
    portworx.io/disable-storage-class: "true"
    portworx.io/pvc-controller: 'false'
    argocd.argoproj.io/compare-options: IgnoreExtraneous
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/sync-wave: '2'
spec:
  image: portworx/oci-monitor:2.13.10
  imagePullPolicy: Always
  kvdb:
    internal: true
  nodes:
    - selector:
        labelSelector:
          matchLabels:
            px-node: 'true'
      storage:
        devices:
        - /dev/vdc
        kvdbDevice: /dev/vdb
  placement:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: px-node
                operator: In
                values:
                  - 'true'
  secretsProvider: k8s
  security:
    auth:
      guestAccess: Enabled
      selfSigned:
        issuer: operator.portworx.com
        sharedSecret: px-shared-secret
        tokenLifetime: 10y
  storage:
    devices: []
    kvdbDevice: ""
  stork:
    enabled: true
    args:
      webhook-controller: "false"
